<!doctype html>
<title>WebGL Example</title>
<link rel="stylesheet" type="text/css" href="../d3.parcoords.css">
<link rel="stylesheet" type="text/css" href="style.css">
<script src="lib/d3.min.js"></script>
<script src="lib/gl-matrix-min.js"></script>
<script src="lib/webgl-utils.js"></script>
<script src="lib/webgl-debug.js"></script>
<script src="lib/underscore.js"></script>
<script src="lib/d3.svg.multibrush.js"></script>
<script src="../d3.parcoords.js"></script>
<div id="example" class="parcoords" style="width:1300px;height:370px;"></div>

<p>
  <label for="sltRenderer">Renderer:</label>
  <select id="sltRenderer">
  </select>
</p>

<script id="progressive">// linear color scale
// interact with this variable from a javascript console
var pc;

// load csv file and create the chart
d3.csv('data/cars.csv', function(data) {
  var colorgen = d3.scale.category20();
  var colors = {};
  _(data).chain()
    .pluck('group')
    .uniq()
    .each(function(d,i) {
      colors[d] = colorgen(i);
    });

  var color = function(d) { return colors[d.group]; };

  pc = d3.parcoords()("#example", "canvas")
    .data(data)
    .color(color)
    .alpha(0.4)
    .margin({ top: 24, left: 150, bottom: 12, right: 0 })
 //   .mode("queue")
    .render()
    .reorderable()
    .brushMode("1D-axes-multi");
    

  pc.svg.selectAll("text")
    .style("font", "10px sans-serif");
  
  var sltRenderer = d3.select("#sltRenderer");
  
  sltRenderer.selectAll('option')
    .data(pc.renderTypes())
    .enter()
      .append('option')
      .text(function(d) { return d; });
  
  sltRenderer.on('change', function() {
	 pc.renderType(this.value).render(); 
	 pc.svg.selectAll("text")
	    .style("font", "10px sans-serif");
  });
  
  sltRenderer.property('value', 'canvas');
  
});
</script>



